# 2. Rust 基础入门

## 2.1 变量绑定与解构

### 变量命名

对于 `type-level` 的构造 Rust 倾向于使用**驼峰命名法**（UpperCamelCase），而对于 `value-level` 的构造使用蛇形命名法（snake_case）。

### 变量绑定

```Rust
let x = 5;
```

### 变量的可变性

`Rust` 可以手动设定变量的**可变性**（是否可修改变量的值，`Erlang` 即不可变）。兼顾灵活性和安全性，还可以带来运行性能上的提升。

`Rust` 的变量在<u>默认</u>情况下是<u>不可变</u>的。`mut` 可以将变量变为可变。

```Rust
let mut x = 5;
```

### 不可变变量和常量之间的差异

常量使用 `const` 关键字，常量在程序运行的整个过程中都有效，对于需要在多处代码共享一个不可变的值时非常有用。

> Q：并不是在中途可以变，而是在定义的时候可以自主选择，那跟常量的区别在哪呢。
>
> A：const 的值在编译时可以确定，不可变变量再怎么不可变，它都还是变量啊，既然是运行时才能确定的东西当然要和 const 分开，这是再自然不过的事。一个是编译时确定，一个是运行时确定，不一定是具体的值，可以看情况而定。

### 使用下划线开头忽略未使用的变量

你希望告诉 Rust **不要警告未使用的变量**，为此可以用下划线作为变量名的开头`let _x = 27`。

```rust
#[allow(unused_variables)]
```

### 变量解构

<u>*暂时还没有很理解。*</u>学完模式匹配章节后，再回头来看。

### 变量屏蔽

同名的新变量可以屏蔽之前的变量。

## 2.2 基本类型

**静态**类型语言，<u>基本类型</u>和<u>复合类型</u>，基本类型如下：

- 字符串：字符串字面量和字符串切片 `&str`
- 布尔类型： `true`和`false`
- 字符类型: 表示单个 Unicode 字符，存储为 4 个字节
- 单元类型: 即 `()` ，其唯一的值也是 `()`

### 2.2.1 数值类型

有符号整数 (`i8`, `i16`, <u>`i32`（默认）</u>, `i64`, `isize`)、 无符号整数 (`u8`, `u16`, `u32`, `u64`, `usize`) 、浮点数 (`f32`, <u>`f64`（默认）</u>)。

Rust 的数值上可以使用方法。

#### 整数类型

| 长度       | 有符号类型                        | 无符号类型    |
| ---------- | --------------------------------- | ------------- |
| 8 位       | `i8`                              | `u8`          |
| 16 位      | `i16`                             | `u16`         |
| 32 位      | `i32`                             | `u32`         |
| 64 位      | `i64`                             | `u64`         |
| 128 位     | `i128`                            | `u128`        |
| 视架构而定 | `isize`                           | `usize`       |
| 数字范围   | $-(2^{n - 1}) \to  2^{n - 1} - 1$ | $0 \to 2^n-1$ |

| 数字字面量         | 示例          |
| ------------------ | ------------- |
| 十进制             | `98_222`      |
| 十六进制           | `0xff`        |
| 八进制             | `0o77`        |
| 二进制             | `0b1111_0000` |
| 字节 (仅限于 `u8`) | `b'A'`        |

> X：下划线是为了增加数字的可读性。

整数溢出，debug模式报错，release模式补码循环溢出。

#### 浮点类型

- 避免在浮点数上测试相等性
- 当结果在数学上可能存在未定义时，需要格外的小心

#### 有理数和负数

有理数和复数并未包含在标准库中，好在社区已经开发出高质量的 Rust 数值库：[num](https://crates.io/crates/num)。

#### NaN

`NaN` 不能用来比较，可以使用 `is_nan()` 等方法，可以用来判断一个数值是否是 `NaN`。

#### 数字运算、位运算

只有同类型，才能运算。（不会自动转换，**必须是显式的**）

![image-20220711154142423](https://raw.githubusercontent.com/Yuukina/XSJ-Img/main/img/image-20220711154142423.png)

#### 序列

Rust 提供了一个非常简洁的方式序列（Range），用来生成连续的数值，例如 `1..5`，生成从 1 到 4 的连续数字，**不包含** 5 ；`1..=5`，生成从 1 到 5 的连续数字，**包含** 5，它的用途很简单，常常用于循环中。序列只允许用于数字或**字符类型**，字符类型：`'a'..='z'`。<font color="white">浮点数好像不行</font>
